<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🤖 마이맵봇 (MyMapBot) - AI 기반 스마트 맵 플랫폼</title>
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Inter Font for modern UI -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="/style.css">
    
    <!-- Meta tags for SEO -->
    <meta name="description" content="마이맵봇 - AI 기반 스마트 맵 플랫폼. 주차, 경로, 여행, 플래너, 민원, 안내, 예약을 한 곳에서">
    <meta name="keywords" content="마이맵봇, MyMapBot, AI맵, 스마트맵, 주차장, 경로찾기, 여행플래너, POI, 지도">
    <meta name="theme-color" content="#667eea">
</head>
<body>
    <div class="app-container">
        <!-- 헤더 - 미래지향적 디자인 -->
        <header class="header">
            <div class="logo">마이맵봇</div>
            <nav class="nav-menu">
                <button class="nav-btn active" data-tab="parking">
                    <span>🅿️ 주차</span>
                </button>
                <button class="nav-btn" data-tab="route">
                    <span>🗺️ 경로</span>
                </button>
                <button class="nav-btn" data-tab="travel">
                    <span>✈️ 여행</span>
                </button>
                <button class="nav-btn" data-tab="planner">
                    <span>📅 플래너</span>
                </button>
                <button class="nav-btn" data-tab="complaint">
                    <span>📢 민원</span>
                </button>
                <button class="nav-btn" data-tab="info">
                    <span>ℹ️ 안내</span>
                </button>
                <button class="nav-btn" data-tab="booking">
                    <span>📋 예약</span>
                </button>
            </nav>
        </header>

        <!-- 메인 컨테이너 -->
        <div class="main-container">
            <!-- 지도 영역 -->
            <div class="map-section">
                <div id="map"></div>
                <div class="map-controls">
                    <button class="control-btn" id="currentLocation">📍 현재 위치</button>
                    <button class="control-btn" id="refreshData">🔄 새로고침</button>
                </div>
            </div>

            <!-- 사이드바 -->
            <div class="sidebar">
                <!-- 주차 탭 -->
                <div class="tab-content active" id="parking-tab">
                    <h2>🅿️ 주차장 찾기</h2>
                    <div class="search-box">
                        <input type="text" id="parkingSearch" placeholder="주차장 검색...">
                        <button class="search-btn">🔍</button>
                    </div>
                    
                    <div class="filter-section">
                        <label>
                            <input type="checkbox" id="filterAvailable"> 빈 자리만 보기
                        </label>
                    </div>

                    <div class="parking-list" id="parkingList">
                        <!-- 동적으로 생성됨 -->
                    </div>
                </div>

                <!-- 경로 탭 -->
                <div class="tab-content" id="route-tab">
                    <h2>🗺️ 경로 안내</h2>
                    <div class="route-form">
                        <div class="form-group">
                            <label>출발지</label>
                            <input type="text" id="routeStart" placeholder="현재 위치">
                        </div>
                        <div class="form-group">
                            <label>도착지</label>
                            <input type="text" id="routeEnd" placeholder="도착지 입력">
                        </div>
                        <div class="form-group">
                            <label>교통수단</label>
                            <select id="transportMode">
                                <option value="car">자동차</option>
                                <option value="walk">도보</option>
                                <option value="bike">자전거</option>
                            </select>
                        </div>
                        <button class="primary-btn" id="findRoute">경로 찾기</button>
                    </div>
                    <div class="route-result" id="routeResult"></div>
                </div>

                <!-- 여행 목적별 추천 탭 -->
                <div class="tab-content" id="travel-tab">
                    <h2>✈️ 목적별 여행 추천</h2>
                    
                    <!-- 목적 선택 -->
                    <div class="purpose-section">
                        <label>이동 목적을 선택하세요</label>
                        <div class="purpose-buttons">
                            <button class="purpose-btn" data-purpose="business">💼 출장</button>
                            <button class="purpose-btn" data-purpose="travel">🏖️ 여행</button>
                            <button class="purpose-btn" data-purpose="dining">🍽️ 식사</button>
                        </div>
                    </div>

                    <!-- 추천 결과 -->
                    <div class="recommendations-container" id="recommendationList">
                        <p style="padding: 1rem; text-align: center; color: #6b7280;">
                            위에서 목적을 선택하면 맞춤 추천을 확인할 수 있습니다.
                        </p>
                    </div>
                </div>

                <!-- 여행 플래너 탭 -->
                <div class="tab-content" id="planner-tab">
                    <h2>📅 여행 플래너</h2>
                    
                    <!-- 계획 목록/생성 토글 -->
                    <div class="planner-mode-toggle">
                        <button class="toggle-btn active" data-mode="list">내 여행 계획</button>
                        <button class="toggle-btn" data-mode="create">새 계획 만들기</button>
                    </div>

                    <!-- 계획 목록 뷰 -->
                    <div class="planner-view active" id="planner-list-view">
                        <div class="plan-list" id="planList">
                            <p style="padding: 1rem; text-align: center; color: #6b7280;">
                                아직 여행 계획이 없습니다.<br>
                                '새 계획 만들기'를 클릭해보세요!
                            </p>
                        </div>
                    </div>

                    <!-- 새 계획 생성 뷰 -->
                    <div class="planner-view" id="planner-create-view">
                        <form class="planner-form" id="planForm">
                            <div class="form-group">
                                <label>여행 제목 *</label>
                                <input type="text" id="planTitle" placeholder="예: 제주도 가족 여행" required>
                            </div>
                            
                            <div class="form-group">
                                <label>목적지 *</label>
                                <input type="text" id="planDestination" placeholder="예: 제주도" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>출발일 *</label>
                                    <input type="date" id="planStartDate" required>
                                </div>
                                <div class="form-group">
                                    <label>도착일 *</label>
                                    <input type="date" id="planEndDate" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>예산</label>
                                    <input type="number" id="planBudget" placeholder="원" min="0">
                                </div>
                                <div class="form-group">
                                    <label>인원</label>
                                    <input type="number" id="planTravelers" value="1" min="1">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>메모</label>
                                <textarea id="planNotes" rows="3" placeholder="여행에 대한 메모를 입력하세요..."></textarea>
                            </div>
                            
                            <button type="submit" class="primary-btn">계획 생성</button>
                        </form>
                    </div>

                    <!-- 계획 상세 뷰 -->
                    <div class="planner-view" id="planner-detail-view">
                        <div class="plan-detail">
                            <div class="plan-header">
                                <button class="back-btn" id="backToPlanList">← 목록으로</button>
                                <div class="plan-actions">
                                    <button class="action-btn" id="exportToCalendar">📅 캘린더로 내보내기</button>
                                    <button class="action-btn" id="editPlan">✏️ 수정</button>
                                    <button class="action-btn danger" id="deletePlan">🗑️ 삭제</button>
                                </div>
                            </div>
                            
                            <div class="plan-info" id="planInfo">
                                <!-- 동적으로 생성 -->
                            </div>
                            
                            <div class="itinerary-section">
                                <div class="section-header">
                                    <h3>일정</h3>
                                    <button class="add-btn" id="addItinerary">+ 일정 추가</button>
                                </div>
                                
                                <div class="itinerary-list" id="itineraryList">
                                    <!-- 동적으로 생성 -->
                                </div>
                            </div>
                            
                            <!-- 목적지 콘텐츠 추천 섹션 -->
                            <div class="content-recommendation-section">
                                <div class="section-header">
                                    <h3>📺 목적지 추천 콘텐츠</h3>
                                    <button class="refresh-btn" id="refreshContent">🔄 새로고침</button>
                                </div>
                                
                                <!-- 목적 선택 -->
                                <div class="content-purpose-selector">
                                    <button class="purpose-filter-btn active" data-purpose="travel">여행</button>
                                    <button class="purpose-filter-btn" data-purpose="business">출장</button>
                                    <button class="purpose-filter-btn" data-purpose="dining">맛집</button>
                                </div>
                                
                                <!-- YouTube 추천 -->
                                <div class="youtube-section">
                                    <h4>🎬 YouTube 추천 영상</h4>
                                    <div class="youtube-list" id="youtubeList">
                                        <p class="loading-text">콘텐츠를 불러오는 중...</p>
                                    </div>
                                </div>
                                
                                <!-- 네이버 블로그 추천 -->
                                <div class="blog-section">
                                    <h4>📝 네이버 블로그 추천</h4>
                                    <div class="blog-list" id="blogList">
                                        <p class="loading-text">콘텐츠를 불러오는 중...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 일정 추가 모달 -->
                    <div class="modal" id="itineraryModal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>일정 추가</h3>
                                <button class="close-btn" id="closeItineraryModal">×</button>
                            </div>
                            <form class="modal-form" id="itineraryForm">
                                <div class="form-group">
                                    <label>날짜 *</label>
                                    <input type="date" id="itineraryDate" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>시간</label>
                                    <input type="time" id="itineraryTime" value="09:00">
                                </div>
                                
                                <div class="form-group">
                                    <label>제목 *</label>
                                    <input type="text" id="itineraryTitle" placeholder="예: 성산일출봉 관람" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>장소</label>
                                    <input type="text" id="itineraryLocation" placeholder="예: 성산일출봉">
                                </div>
                                
                                <div class="form-group">
                                    <label>유형</label>
                                    <select id="itineraryType">
                                        <option value="activity">활동</option>
                                        <option value="accommodation">숙박</option>
                                        <option value="restaurant">식사</option>
                                        <option value="transport">이동</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>메모</label>
                                    <textarea id="itineraryNotes" rows="2"></textarea>
                                </div>
                                
                                <button type="submit" class="primary-btn">추가</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- 민원 탭 -->
                <div class="tab-content" id="complaint-tab">
                    <h2>📝 민원 신고</h2>
                    <div class="complaint-form">
                        <div class="form-group">
                            <label>민원 유형</label>
                            <select id="complaintType">
                                <option value="parking">불법 주차</option>
                                <option value="road">도로 파손</option>
                                <option value="traffic">교통 신호</option>
                                <option value="other">기타</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>위치</label>
                            <input type="text" id="complaintLocation" placeholder="지도에서 선택하거나 직접 입력">
                            <button class="secondary-btn" id="selectLocation">지도에서 선택</button>
                        </div>
                        <div class="form-group">
                            <label>설명</label>
                            <textarea id="complaintDesc" rows="4" placeholder="민원 내용을 자세히 입력해주세요"></textarea>
                        </div>
                        <div class="form-group">
                            <label>사진 첨부</label>
                            <input type="file" id="complaintPhoto" accept="image/*">
                        </div>
                        <button class="primary-btn" id="submitComplaint">신고 접수</button>
                    </div>
                    <div class="complaint-history" id="complaintHistory">
                        <h3>내 신고 내역</h3>
                        <div id="historyList"></div>
                    </div>
                </div>

                <!-- 안내 탭 -->
                <div class="tab-content" id="info-tab">
                    <h2>ℹ️ 주변 안내</h2>
                    <div class="info-categories">
                        <button class="category-btn" data-category="gas">⛽ 주유소</button>
                        <button class="category-btn" data-category="hospital">🏥 병원</button>
                        <button class="category-btn" data-category="restaurant">🍴 음식점</button>
                        <button class="category-btn" data-category="cafe">☕ 카페</button>
                        <button class="category-btn" data-category="store">🏪 편의점</button>
                    </div>
                    <div class="info-list" id="infoList">
                        <!-- 동적으로 생성됨 -->
                    </div>
                </div>

                <!-- 예약 탭 -->
                <div class="tab-content" id="booking-tab">
                    <h2>📅 예약 관리</h2>
                    <div class="booking-form">
                        <div class="form-group">
                            <label>예약 유형</label>
                            <select id="bookingType">
                                <option value="parking">주차장 예약</option>
                                <option value="charging">전기차 충전</option>
                                <option value="carwash">세차</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>시설 선택</label>
                            <select id="facilitySelect">
                                <option value="">시설을 선택하세요</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>날짜</label>
                            <input type="date" id="bookingDate">
                        </div>
                        <div class="form-group">
                            <label>시간</label>
                            <input type="time" id="bookingTime">
                        </div>
                        <div class="form-group">
                            <label>이용 시간</label>
                            <select id="bookingDuration">
                                <option value="1">1시간</option>
                                <option value="2">2시간</option>
                                <option value="3">3시간</option>
                                <option value="4">4시간</option>
                                <option value="day">종일</option>
                            </select>
                        </div>
                        <button class="primary-btn" id="submitBooking">예약하기</button>
                    </div>
                    <div class="booking-list" id="bookingList">
                        <h3>예약 내역</h3>
                        <div id="myBookings"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 통계 패널 -->
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-value" id="totalParking">128</div>
                <div class="stat-label">전체 주차장</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="availableSpots">342</div>
                <div class="stat-label">이용 가능</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="activeComplaints">7</div>
                <div class="stat-label">처리 중 민원</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="todayBookings">23</div>
                <div class="stat-label">오늘 예약</div>
            </div>
        </div>
    </div>

    <!-- 챗봇 플로팅 버튼 -->
    <button id="chatbot-toggle" class="chatbot-toggle" title="마이맵봇 챗봇">
        🤖
    </button>

    <!-- 챗봇 컨테이너 -->
    <div id="chatbot-container" class="chatbot-container">
        <div class="chatbot-header">
            <div class="chatbot-title">
                <span class="chatbot-icon">🤖</span>
                <span>마이맵봇</span>
            </div>
            <div class="chatbot-language">
                <select id="chatbot-language-select" class="language-select">
                    <option value="ko">🇰🇷 한국어</option>
                    <option value="en">🇺🇸 English</option>
                    <option value="ja">🇯🇵 日本語</option>
                    <option value="zh">🇨🇳 中文</option>
                </select>
            </div>
            <button id="chatbot-close" class="chatbot-close">✕</button>
        </div>
        
        <div id="chatbot-messages" class="chatbot-messages">
            <!-- 메시지가 여기에 동적으로 추가됩니다 -->
        </div>
        
        <div id="chatbot-quick-actions" class="chatbot-quick-actions">
            <!-- 퀵 액션 버튼이 여기에 동적으로 추가됩니다 -->
        </div>
        
        <div class="chatbot-input-area">
            <input 
                type="text" 
                id="chatbot-input" 
                class="chatbot-input" 
                placeholder="메시지를 입력하거나 음성으로 말씀하세요..."
            />
            <button id="chatbot-voice" class="chatbot-voice-btn" title="음성 입력">
                🎙️
            </button>
            <button id="chatbot-send" class="chatbot-send-btn" title="전송">
                ➤
            </button>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="/i18n.js"></script>
    <script type="module" src="/main.js"></script>
    <script type="module" src="/planner.js"></script>
    <script src="/chatbot.js"></script>
</body>
</html>
